<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Acceder Datos Abiertos a Través del API de Junar • junr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Acceder Datos Abiertos a Través del API de Junar">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">junr</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.2.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/acceder-junar-api.html">Acceder Datos Abiertos a Través del API de Junar</a>
    </li>
    <li>
      <a href="../articles/access-junar-api.html">Access Open Data Through the Junar API</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/fvd/junr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Acceder Datos Abiertos a Través del API de Junar</h1>
                        <h4 class="author">Frans van Dunné</h4>
            
            <h4 class="date">2019-08-10</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/fvd/junr/blob/master/vignettes/acceder-junar-api.Rmd"><code>vignettes/acceder-junar-api.Rmd</code></a></small>
      <div class="hidden name"><code>acceder-junar-api.Rmd</code></div>

    </div>

    
    
<div id="introduccion" class="section level2">
<h2 class="hasAnchor">
<a href="#introduccion" class="anchor"></a>Introducción</h2>
<p>El API de Junar es la base para varias iniciativas de Datos Abiertos en Latino América y los EEUU. El paquete <code>junr</code> facilita el acceso a estos datos desde R. El objetivo es fomentar el uso de los datos disponibles haciendo el acceso lo mas fácil. Algunos ejemplos de implementaciones se pueden encontrar en el <a href="http://www.junar.com/">sitio web de Junar</a>.</p>
<div id="ejemplos-de-uso" class="section level3">
<h3 class="hasAnchor">
<a href="#ejemplos-de-uso" class="anchor"></a>Ejemplos de uso</h3>
<p>Como ejemplo vamos a usar los <a href="http://datosabiertos.presidencia.go.cr/home">datos de la casa presidencial de Costa Rica</a>. Lo primero es ir al sitio correspondiente para encontrar el URL base (<code>base_url</code>) y obtener un <em>API Key</em> para obtener acceso al API de Junar en <a href="http://datosabiertos.presidencia.go.cr/developers/">la página de Datos Abiertos Costa Rica</a>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(junr)</a>
<a class="sourceLine" id="cb1-2" title="2">url_base &lt;-<span class="st"> "http://api.datosabiertos.presidencia.go.cr/api/v2/datastreams/"</span></a>
<a class="sourceLine" id="cb1-3" title="3">api_key &lt;-<span class="st"> "0bd55e858409eefabc629b28b2e7916361ef20ff"</span> </a></code></pre></div>
<p>Miremos primero cuales datos hay disponibles en este URL.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="kw"><a href="../reference/get_index.html">get_index</a></span>(url_base, api_key)</a></code></pre></div>
<p>No mostramos los resultados aquí porque el indice es la lista completa con todos los meta-datos incluidos como una hoja de datos (<em>data frame</em>) en R.</p>
<p>Para tener solo una lista de los GUID la instrucción es:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="kw"><a href="../reference/list_guid.html">list_guid</a></span>(url_base, api_key)</a></code></pre></div>
<p>Y solo un listado de los títulos.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="kw"><a href="../reference/list_titles.html">list_titles</a></span>(url_base, api_key)</a></code></pre></div>
<p>Tanto <code><a href="../reference/list_guid.html">list_guid()</a></code> como <code><a href="../reference/list_titles.html">list_titles()</a></code> fueron escritos para hacernos la vida mas fácil ya que los resultados tienden a ajustarse a una ventana de consola, lo cual lo hace mas fácil leerlos. Ayudan para tener una sobrevista rápida de los datos que hay disponibles.</p>
</div>
</div>
<div id="bajar-datos-a-r" class="section level2">
<h2 class="hasAnchor">
<a href="#bajar-datos-a-r" class="anchor"></a>Bajar datos a R</h2>
<p>Necesitas conocer el Identificador Global Único (GUID) de los datos que son de tu interés para poder bajar los datos a tu sesión de R. Puedes buscar el GUID en la página web. Por ejemplo para en la <a href="http://datosabiertos.presidencia.go.cr/dashboards/9566/compras-publicas/">pagina de compras publicas</a> del sitio de Datos Abiertos de Costa Rica hay una tabla con el titulo “Compras Públicas del Ministerio de la Presidencia”. En el menu debajo de la tabla existe la opción “obtener GUID”. Esta última abre una ventana con el GUID “COMPR-PUBLI-DEL-MINIS” que vamos a usar aquí abajo.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">guid_datos &lt;-<span class="st"> "COMPR-PUBLI-DEL-MINIS"</span></a>
<a class="sourceLine" id="cb5-2" title="2">datos_compras &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_data.html">get_data</a></span>(url_base, api_key, guid_datos)</a></code></pre></div>
<p>Con <code><a href="https://www.rdocumentation.org/packages/utils/topics/View">View(datos_compras)</a></code> podrás comprobar que los datos han sido bajado desde la plataforma Junar y han sido convertidos a una hoja de datos (<em>data frame</em>) en R (mira mas abajo para convertir datos de divisas a números).</p>
<p>Observa que no necesitamos ir a la interfaz para buscar los GUID de los conjuntos de datos que nos interesan. Con la función <code><a href="../reference/list_guid.html">list_guid()</a></code> como la usamos arriba obtuvimos la misma información.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">datos_disponibles &lt;-<span class="st"> </span><span class="kw"><a href="../reference/list_guid.html">list_guid</a></span>(url_base, api_key)</a>
<a class="sourceLine" id="cb6-2" title="2">datos_disponibles[<span class="dv">3</span>]</a></code></pre></div>
<pre><code>## [1] "ABRIL-2019-SALAR-PRESI-DE"</code></pre>
<p>Obtenemos el GUID que queremos indicando que es el tercero en la lista (mira la lista completa mas arriba). Y el mismo índice se puede usar en una lista de los títulos completos que podemos crear con la función <code><a href="../reference/list_titles.html">list_titles()</a></code>.</p>
</div>
<div id="determinar-la-cantidad-de-datos-disponibles" class="section level2">
<h2 class="hasAnchor">
<a href="#determinar-la-cantidad-de-datos-disponibles" class="anchor"></a>Determinar la cantidad de datos disponibles</h2>
<p>En las plataformas que corren en Junar se encuentran muchos datos que no son mas que tablas (datos ya trabajados y resumidos). Por eso es útil poder ver de una vez cuantos filas hay detrás de cada GUID en el URL disponible.</p>
<p>En <code>junr</code> lo puedes hacer rápidamente usando la función <code>get_dimensions</code> para obtener una tabla con todos los GUID y las dimensiones de los datos:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1"><span class="kw"><a href="../reference/get_dimensions.html">get_dimensions</a></span>(url_base, api_key)</a></code></pre></div>
</div>
<div id="limpiar-valores-de-divisas" class="section level2">
<h2 class="hasAnchor">
<a href="#limpiar-valores-de-divisas" class="anchor"></a>Limpiar valores de divisas</h2>
<p>Por lo menos en los datos ejemplo arriba, pero posiblemente en mas implementaciones de Junar, hay que limpiar todos los datos que corresponden a divisas. En nuestro caso hay que buscar todos los símbolos de la divisa (Colon Costarricense), y todas las comas ya que estas hacen que para R son valores de Texto y no números.</p>
<p>Hay un para de utilidades para hacerlo <code>clean_currency</code> y <code>get_currency_symbol</code>. Por ejemplo:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1">datos_con_divisas &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_data.html">get_data</a></span>(url_base, api_key, <span class="st">"LICIT-ADJUD-POR-LOS-MINIS"</span>)</a>
<a class="sourceLine" id="cb9-2" title="2">datos_con_divisas<span class="op">$</span><span class="st">`</span><span class="dt">Monto Adjudicado</span><span class="st">`</span> &lt;-<span class="st"> </span><span class="kw"><a href="../reference/clean_currency.html">clean_currency</a></span>(datos_con_divisas<span class="op">$</span><span class="st">`</span><span class="dt">Monto Adjudicado</span><span class="st">`</span>)  </a></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduccion">Introducción</a></li>
      <li><a href="#bajar-datos-a-r">Bajar datos a R</a></li>
      <li><a href="#determinar-la-cantidad-de-datos-disponibles">Determinar la cantidad de datos disponibles</a></li>
      <li><a href="#limpiar-valores-de-divisas">Limpiar valores de divisas</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Frans van Dunné.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
